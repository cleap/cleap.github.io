<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>How We Used PWG - Spring 2021 Procedural Generation Independent Study</title>
        
        


        <!-- Custom HTML head -->
        


        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        
        <link rel="icon" href="../favicon.svg">
        
        
        <link rel="shortcut icon" href="../favicon.png">
        
        <link rel="stylesheet" href="../css/variables.css">
        <link rel="stylesheet" href="../css/general.css">
        <link rel="stylesheet" href="../css/chrome.css">
        
        <link rel="stylesheet" href="../css/print.css" media="print">
        

        <!-- Fonts -->
        <link rel="stylesheet" href="../FontAwesome/css/font-awesome.css">
        
        <link rel="stylesheet" href="../fonts/fonts.css">
        

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../highlight.css">
        <link rel="stylesheet" href="../tomorrow-night.css">
        <link rel="stylesheet" href="../ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        

        
        <!-- MathJax -->
        <script async type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
        
    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded "><a href="../intro.html"><strong aria-hidden="true">1.</strong> Introduction</a></li><li class="chapter-item expanded "><a href="../world/world_intro.html"><strong aria-hidden="true">2.</strong> Procedural World Generation (PWG)</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../world/world_what.html"><strong aria-hidden="true">2.1.</strong> What Can PWG Do?</a></li><li class="chapter-item expanded "><a href="../world/world_us.html" class="active"><strong aria-hidden="true">2.2.</strong> How We Used PWG</a></li><li class="chapter-item expanded "><a href="../world/world_resources.html"><strong aria-hidden="true">2.3.</strong> Going Further</a></li></ol></li><li class="chapter-item expanded "><a href="../animation/anim_intro.html"><strong aria-hidden="true">3.</strong> Procedural Animation (PA)</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../animation/anim_what.html"><strong aria-hidden="true">3.1.</strong> What Can PA Do?</a></li><li class="chapter-item expanded "><a href="../animation/anim_us.html"><strong aria-hidden="true">3.2.</strong> How We Used PA</a></li><li class="chapter-item expanded "><a href="../animation/anim_resources.html"><strong aria-hidden="true">3.3.</strong> Going Furhter</a></li></ol></li><li class="chapter-item expanded "><a href="../music/music_intro.html"><strong aria-hidden="true">4.</strong> Procedural Music (PM)</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../music/music_what.html"><strong aria-hidden="true">4.1.</strong> What Can PM Do?</a></li><li class="chapter-item expanded "><a href="../music/music_us.html"><strong aria-hidden="true">4.2.</strong> How We Used PM</a></li><li class="chapter-item expanded "><a href="../music/music_resources.html"><strong aria-hidden="true">4.3.</strong> Going Further</a></li></ol></li><li class="chapter-item expanded "><a href="../game.html"><strong aria-hidden="true">5.</strong> Game Demo</a></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light (default)</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                        
                    </div>

                    <h1 class="menu-title">Spring 2021 Procedural Generation Independent Study</h1>

                    <div class="right-buttons">
                        
                        <a href="../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        
                        
                    </div>
                </div>

                
                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" name="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>
                

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1><a class="header" href="#how-we-used-procedural-world-generation" id="how-we-used-procedural-world-generation">How we used procedural world generation</a></h1>
<p>In this section, we describe the different procedural world generation
techniques we used to generate worlds.</p>
<h2><a class="header" href="#terrain-generation" id="terrain-generation">Terrain generation</a></h2>
<p><img src="screenshots/terrain.PNG" alt="Procedural World Generation Screenshot" /></p>
<p>We implemented a procedural terrain generation algorithm in Godot to create
wrapping worlds that consist of landmasses, oceans, lakes, biomes, and
villages.</p>
<p>For our purposes, the process of generating the terrain was split into three parts:</p>
<ol>
<li>Generate a world map</li>
<li>Generate a terrain height map based off of the world map</li>
<li>Place villages around the terrain</li>
</ol>
<h2><a class="header" href="#generate-a-world-map" id="generate-a-world-map">Generate a world map</a></h2>
<p><img src="http://www.jgallant.com/wp-content/uploads/2016/01/biomesrender.png" alt="JGallant's World Map" /></p>
<p>To make the world map, we followed <a href="http://www.jgallant.com/procedurally-generating-wrapping-world-maps-in-unity-csharp-part-1/">JGallant's <em>Procedurally Generating
Wrapping World Maps in Unity C#</em></a>
tutorial. The tutorial is for Unity and C#, but JGalant provides enough
information for us to write the code for Godot in GDScript. Our code can be
found <a href="https://github.com/cleap/s21-game-is/tree/main/Procedural%20World%20Demo/WrappingMap">here</a>.</p>
<p>We followed JGallant's tutorial to generate our height map, moisture map, and
heat map, which we then used to define biomes. The map also wraps on both
axes, so that the left edge lines up with the right edge, and the top edge
lines up with the bottom edge. JGallant's tutorial also goes
deeper, identifying specific lakes in the map and generating rivers based on
gradient descent. We did not follow the tutorial this far, although we would
like to in the future.</p>
<h2><a class="header" href="#village-and-cave-generation" id="village-and-cave-generation">Village and cave generation</a></h2>
<p><img src="screenshots/caves.PNG" alt="Cave Generation Screenshot" /></p>
<p>We also generated villages, following <a href="https://github.com/GDQuest/godot-procedural-generation/tree/master/godot/BasicDungeon/01.Rectangular">GDQuest's dungeon generator tutorial</a>.
This method is originally meant for generating caves, which we wanted to add
to our mountains. Later down the line, we realized that we could also use
this method to generate villages. Instead of placing a rectangular room, we
place a house that is scaled to the size of the room.</p>
<h2><a class="header" href="#combining-the-two" id="combining-the-two">Combining the two</a></h2>
<p>To combine the two, we used a 'village-plot-request system.' First, we generate
our world terrain. Then, the world generation script asks the terrain for
some number of village plots of a certain size. The terrain searches for valid
spots on the terrain that could fit the plots. Right now, the check just
chooses random spots that are inside the map, but this could be modified to
take terrain height or biome into consideration. The terrain then gives the
world generation script coordinates on the map to place villages. The village
generation script then generates villages of the specified size, then placing
them on the map.</p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                        
                            <a rel="prev" href="../world/world_what.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>
                        

                        
                            <a rel="next" href="../world/world_resources.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>
                        

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                
                    <a rel="prev" href="../world/world_what.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>
                

                
                    <a rel="next" href="../world/world_resources.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
                
            </nav>

        </div>

        

        

        

        
        <script type="text/javascript">
            window.playground_copyable = true;
        </script>
        

        

        
        <script src="../elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../searcher.js" type="text/javascript" charset="utf-8"></script>
        

        <script src="../clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="../book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->
        

        

    </body>
</html>
